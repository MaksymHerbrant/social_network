<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<link rel="stylesheet" href="/static/css/reg.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">  
<script src="/static/js/code.js"></script>

<!------------------LIght BOx for Gallery--------------> 
<link rel="stylesheet" href="/static/css/lightbox.min.css">

<!------------------LIght BOx for Gallery-------------->
<title>Application-1</title>
</head>
<body>

<!-- <button id="open-dialog-button">AddPost</button> -->




    <!-------------------------------NAvigation Starts------------------>

    <nav class="navbar navbar-expand-md navbar-dark mb-4" style="background-color:#3097D1">
        <a href="index.html" class="navbar-brand"><img src="img/brand-white.png" alt="logo" class="img-fluid" width="80px" height="100px"></a>

        <button class="navbar-toggler" data-toggle="collapse" data-target="#responsive"><span class="navbar-toggler-icon"></span></button>


        <div class="collapse navbar-collapse" id="responsive">
            <ul class="navbar-nav mr-auto text-capitalize">
                <li class="nav-item"><a href="index.html" class="nav-link active">home</a></li>
                <li class="nav-item"><a href="profile/{{user.id}}" class="nav-link">profile</a></li>
                <li class="nav-item"><a href="#modalview" class="nav-link" data-toggle="modal">messages</a></li>
                <li class="nav-item"><a href="notification.html" class="nav-link">docs</a></li>
                <li class="nav-item"><a href="#" class="nav-link d-md-none">growl</a></li>
                <li class="nav-item"><a href="#" class="nav-link d-md-none">logout</a></li>

            </ul>

            <form action="" class="form-inline ml-auto d-none d-md-block">
                <input type="text" name="search" id="search" placeholder="Search" class="form-control form-control-sm">
            </form>
            
            <a href="logout/" ><img src="\static\img\base\logout.png" alt="img" width="20px" height="20px"></a>





        </div>





    </nav>

    <!---------------------------------------------Ends navigation------------------------------>

    <!---------------------------MOdal Section  satrts------------------->

    <div class="modal fade" id="modalview">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">

            <div class="modal-content">


                <div class="modal-header">
                    <div class="modal-title h4">Messages</div>

                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>


                <div class="modal-body">


                    <ul class="list-unstyled">


                     <a href="#" class="text-decoration-none">
                        <li class="media hover-media">
                           
                                <img src="img/avatar-dhg.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                <div class="media-body text-dark">
                                        <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                        <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                </div>

                        </li>
                    </a>
                    <hr class="my-3">


                    
                    <a href="#" class="text-decoration-none">
                            <li class="media hover-media">
                               
                                    <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
    
                                    <div class="media-body text-dark">
                                            <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
    
                                    </div>
    
                            </li>
                        </a>


                        <hr class="my-3">


                        <a href="#" class="text-decoration-none">
                            <li class="media hover-media">
                               
                                    <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
    
                                    <div class="media-body text-dark">
                                            <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
    
                                    </div>
    
                            </li>
                        </a>

                        <hr class="my-3">


                        <a href="#" class="text-decoration-none">
                                <li class="media hover-media">
                                   
                                        <a href="logout/" ><img src="/img/base/logout.png" alt="img" width="60px" height="60px"></a>
        
                                        <div class="media-body text-dark">
                                                <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                                <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
        
                                        </div>
        
                                </li>
                            </a>
                            <hr class="my-3">
        
        
                            
                            <a href="#" class="text-decoration-none">
                                    <li class="media hover-media">
                                       
                                            <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
            
                                            <div class="media-body text-dark">
                                                    <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
            
                                            </div>
            
                                    </li>
                                </a>
        
        
                                <hr class="my-3">
        
        
                                <a href="#" class="text-decoration-none">
                                    <li class="media hover-media">
                                       
                                            <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
            
                                            <div class="media-body text-dark">
                                                    <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
            
                                            </div>
            
                                    </li>
                                </a>

                        
                                <hr class="my-3">
                                <a href="#" class="text-decoration-none">
                                        <li class="media hover-media">
                                           
                                                <img src="img/avatar-dhg.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
                
                                                <div class="media-body text-dark">
                                                        <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                                        <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                
                                                </div>
                
                                        </li>
                                    </a>
                                    <hr class="my-3">
                
                
                                    
                                    <a href="#" class="text-decoration-none">
                                            <li class="media hover-media">
                                               
                                                    <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
                    
                                                    <div class="media-body text-dark">
                                                            <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    
                                                    </div>
                    
                                            </li>
                                        </a>
                
                
                                        <hr class="my-3">
                
                
                                        <a href="#" class="text-decoration-none">
                                            <li class="media hover-media">
                                               
                                                    <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">
                    
                                                    <div class="media-body text-dark">
                                                            <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    
                                                    </div>
                    
                                            </li>
                                        </a>
    
    


                    </ul>



                    

                </div>
            </div>


        </div>


    </div>

    <!-------------------------------MOdal Ends---------------------------->



    <!-------------------------------------------Start Grids layout for lg-xl-3 columns and (xs-lg 1 columns)--------------------------------->


    <div class="container">
        <div class="row">


            <!--------------------------left columns  start-->

            <div class="col-12 col-lg-3">

                <div class="left-column">


                    <div class="card card-left1 mb-4" >
                        
                        <div class="card-body text-center ">
                            <img src="img/avatar-dhg.png" alt="img" width="120px" height="120px" class="rounded-circle mt-n5">
                            <ul class="list-unstyled nav justify-content-center">
                               <a href="#" class="text-dark text-decoration-none"> <li class="nav-item">Friends <br> <strong>12M</strong></li></a>
                              <a href="#" class="text-dark text-decoration-none"> <li class="nav-item">Enimes <br> <strong>1</strong></li></a> 
                            </ul>

                        </div>




                    </div>


                    <div class="card shadow-sm card-left2 mb-4">

                        <div class="card-body">

                                <h5 class="mb-3 card-title">About <small><a href="#" class="ml-1">Edit</a></small></h5>

                                <p class="card-text"> <i class="fas fa-calendar-week mr-2"></i> Went to <a href="#" class="text-decoration-none">oh canada</a></p>

                                <p class="card-text"> <i class="fas fa-user-friends mr-2"></i> Become a friend with <a href="#" class="text-decoration-none">obama</a></p>
                                <p class="card-text"> <i class="far fa-building mr-2"></i> Work at <a href="#" class="text-decoration-none">Github</a></p>
                                <p class="card-text"> <i class="fas fa-home mr-2"></i> Live in <a href="#" class="text-decoration-none">San francisco</a></p>
                                <p class="card-text"> <i class="fas fa-map-marker mr-2"></i> From <a href="#" class="text-decoration-none">Seattle, WA</a></p>




                        </div>
                     




                    </div>




                    <div class="card shadow-sm card-left3 mb-4">

                        <div class="card-body">
                    
                            

                            
                        
                            <div class="row">
                                <div class="col-6 p-1" >
                                    <button id="openDialogButton">Відкрити вікно</button>
                                                            <div id="overlay"></div> <!-- Елемент для затемненого фону -->
                                                            <dialog id="myDialog">
                                                            <form method="POST" action="{% url 'addpost' %}" enctype="multipart/form-data">
                                                                {% csrf_token %}
                                                                <label for="id_title">Заголовок:</label>
                                                                <input type="text" name="title" id="id_title" required><br>

                                                                <label for="id_body">Тіло:</label>
                                                                <textarea name="body" id="id_body" style="height: 200px;" required></textarea><br>
                                                                <input  type="file" name="photo" id="photo" name="photo" >

                                                                <input type="submit" value="Створити пост" class="btn btn-outline-secondary">
                                                            </form>

                                                            <button id="closeDialogButton">
                                                                <img src="/static/img/base/cross.png" alt="Закрити">
                                                            </button>
                                                            </dialog>
                                <!-- <form method="POST">
                                    {% csrf_token %}
                                    {{ form.as_p }}
                                    <button class="btn btn-secondary button">Create</button>
                                </form> -->
                                </div>


                               

                            </div>

                        </div>







                        </div>




                   

                    





                </div>





            </div>








 <!--------------------------Ends Left columns-->





 <!---------------------------------------Middle columns  start---------------->



            
            <div class="col-12 col-lg-6" >


                <div class="middle-column">


                    <div class="card" >


                        <div class="card-header bg-transparent">
                            <form class="form-inline">


                                <div class="input-group w-100">
                                 <input type="text" name="message" id="message" placeholder="Message" class="form-control form-control-md">

                                 <div class="input-group-append">
                                        <div class="input-group-text">
                                                <i class="fas fa-camera"></i>
                                            </div>


                                 </div>

                                </div>



                        
                                
                               
                            </form>

                        </div>



                        <div class="card-body">
                            <div class="media-body">
                              {% for post in posts %}
                              <h5>{{ post.user.username }}</h5>
                              <h2>{{ post.title }}</h2>
                              <p>{{ post.body }}</p>
                              <div class="delete-container">
                                <form method="post" action="/delete/{{ post.id }}" class="delete-form">
                                  {% csrf_token %}
                                  <input type="submit" value="Видалити пост" class="delete-button">
                                </form>
                              </div>
                              <a class="like" data-post-id="{{ post.id }}" data-url="/post/{{ post.id }}/toggle_like/">
                                {% if post.is_liked %}
                                  <button class="like-button liked">
                                    <img src="/static/img/base/like.png" width="50">
                                  </button>
                                {% else %}
                                  <button class="like-button">
                                    <img src="/static/img/base/dislike.png" width="50">
                                  </button>
                                {% endif %}
                              </a>
                              <p class="like-amount" id="like-count-{{ post.id }}">{{ post.like_set.count }}</p>
                              <img src="/{{ post.photo|cut:"network/" }}" height="300" width="300">
                              <hr>
                              {% endfor %}
                            </div>
                          </div>
                          
                          
                          
                          
                          
                        
                        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function addLike() {
  $('.like').click(function() {
    let btn = $(this);
    let postId = btn.data('post-id');
    let likeAmount = btn.next('.like-amount');

    $.ajax(btn.data('url'), {
      'type': 'POST',
      'async': true,
      'dataType': 'json',
      'data': {
        'csrfmiddlewaretoken': $('input[name="csrfmiddlewaretoken"]').val(),
        'like': 1
      },
      'success': function(data) {
    if (data['is_like']) {
    btn.find('img').attr('src', '/static/img/base/like.png');
    likeAmount.text(data['like_count']);
    } else {
    btn.find('img').attr('src', '/static/img/base/dislike.png');
    likeAmount.text(data['like_count']);
    }
      }
    });
  });
}

$(document).ready(function() {
  addLike();

  $('.like').each(function() {
    let btn = $(this);
    let postId = btn.data('post-id');
    let likeAmount = btn.next('.like-amount');

    $.ajax(btn.data('url'), {
      'type': 'POST',
      'async': true,
      'dataType': 'json',
      'data': {
        'csrfmiddlewaretoken': $('input[name="csrfmiddlewaretoken"]').val(),
        'is_like': 1
      },
      'success': function(data) {
        if (data['is_like']) {
             btn.find('img').attr('src', '/static/img/base/like.png');
            } else {
             btn.find('img').attr('src', '/static/img/base/dislike.png');
            }
        likeAmount.text(data['like_amount']);
      }
    });
  });
});


</script>
































<!------------------------Light BOx OPtions------------->



<!------------------------Light BOx OPtions------------->








</body>
</html>